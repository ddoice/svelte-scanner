var Bn=Object.defineProperty;var jn=(e,t,n)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ut=(e,t,n)=>(jn(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function E(){}function En(e){return e()}function Fn(){return Object.create(null)}function ie(e){e.forEach(En)}function kn(e){return typeof e=="function"}function Re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ze;function q(e,t){return e===t?!0:(ze||(ze=document.createElement("a")),ze.href=t,e===ze.href)}function zn(e){return Object.keys(e).length===0}function Un(e,...t){if(e==null){for(const s of t)s(void 0);return E}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function vt(e,t,n){e.$$.on_destroy.push(Un(t,n))}function Cn(e){return e??""}function o(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function T(e){e.parentNode&&e.parentNode.removeChild(e)}function qn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function S(){return h(" ")}function Rn(){return h("")}function R(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Vn(e){return e===""?null:+e}function Zn(e){return Array.from(e.childNodes)}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function Dn(e,t){e.value=t??""}let de;function ue(e){de=e}function Hn(){if(!de)throw new Error("Function called outside component initialization");return de}function Jn(e){Hn().$$.on_mount.push(e)}const se=[],pt=[];let oe=[];const Mn=[],Kn=Promise.resolve();let gt=!1;function Wn(){gt||(gt=!0,Kn.then(An))}function mt(e){oe.push(e)}const ft=new Set;let ee=0;function An(){if(ee!==0)return;const e=de;do{try{for(;ee<se.length;){const t=se[ee];ee++,ue(t),Xn(t.$$)}}catch(t){throw se.length=0,ee=0,t}for(ue(null),se.length=0,ee=0;pt.length;)pt.pop()();for(let t=0;t<oe.length;t+=1){const n=oe[t];ft.has(n)||(ft.add(n),n())}oe.length=0}while(se.length);for(;Mn.length;)Mn.pop()();gt=!1,ft.clear(),ue(e)}function Xn(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(mt)}}function Yn(e){const t=[],n=[];oe.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),oe=t}const Ue=new Set;let X;function Gn(){X={r:0,c:[],p:X}}function Qn(){X.r||ie(X.c),X=X.p}function fe(e,t){e&&e.i&&(Ue.delete(e),e.i(t))}function qe(e,t,n,s){if(e&&e.o){if(Ue.has(e))return;Ue.add(e),X.c.push(()=>{Ue.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function Tn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ln(e){e&&e.c()}function ht(e,t,n){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),mt(()=>{const c=e.$$.on_mount.map(En).filter(kn);e.$$.on_destroy?e.$$.on_destroy.push(...c):ie(c),e.$$.on_mount=[]}),i.forEach(mt)}function _t(e,t){const n=e.$$;n.fragment!==null&&(Yn(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xn(e,t){e.$$.dirty[0]===-1&&(se.push(e),Wn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function bt(e,t,n,s,i,c,l=null,u=[-1]){const m=de;ue(e);const r=e.$$={fragment:null,ctx:[],props:c,update:E,not_equal:i,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:Fn(),dirty:u,skip_bound:!1,root:t.target||m.$$.root};l&&l(r.root);let C=!1;if(r.ctx=n?n(e,t.props||{},(a,y,...b)=>{const $=b.length?b[0]:y;return r.ctx&&i(r.ctx[a],r.ctx[a]=$)&&(!r.skip_bound&&r.bound[a]&&r.bound[a]($),C&&xn(e,a)),y}):[],r.update(),C=!0,ie(r.before_update),r.fragment=s?s(r.ctx):!1,t.target){if(t.hydrate){const a=Zn(t.target);r.fragment&&r.fragment.l(a),a.forEach(T)}else r.fragment&&r.fragment.c();t.intro&&fe(e.$$.fragment),ht(e,t.target,t.anchor),An()}ue(m)}class wt{constructor(){ut(this,"$$");ut(this,"$$set")}$destroy(){_t(this,1),this.$destroy=E}$on(t,n){if(!kn(n))return E;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!zn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const es="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(es);const te=[];function yt(e,t=E){let n;const s=new Set;function i(u){if(Re(e,u)&&(e=u,n)){const m=!te.length;for(const r of s)r[1](),te.push(r,e);if(m){for(let r=0;r<te.length;r+=2)te[r][0](te[r+1]);te.length=0}}}function c(u){i(u(e))}function l(u,m=E){const r=[u,m];return s.add(r),s.size===1&&(n=t(i,c)||E),u(e),()=>{s.delete(r),s.size===0&&n&&(n(),n=null)}}return{set:i,update:c,subscribe:l}}let On=0;const ts=3e3;function ns(){const{subscribe:e,update:t}=yt([]);function n(i){On+=1;const c=On,l={...i,id:c};t(u=>[...u,l].slice(-5)),setTimeout(()=>{s(c)},ts)}function s(i){t(c=>c.filter(l=>l.id!==i))}return{subscribe:e,addNotification:n,closeNotification:s}}const pe=ns();function In(e,t,n){const s=e.slice();return s[2]=t[n],s}function Nn(e){let t,n,s=e[2].text+"",i,c,l,u,m,r,C;function a(){return e[1](e[2])}return{c(){t=f("div"),n=f("div"),i=h(s),c=S(),l=f("button"),l.textContent="X",u=S(),d(l,"class","svelte-1mipv5u"),d(t,"class",m=Cn(`notification ${e[2].type}`)+" svelte-1mipv5u")},m(y,b){O(y,t,b),o(t,n),o(n,i),o(t,c),o(t,l),o(t,u),r||(C=R(l,"click",a),r=!0)},p(y,b){e=y,b&1&&s!==(s=e[2].text+"")&&D(i,s),b&1&&m!==(m=Cn(`notification ${e[2].type}`)+" svelte-1mipv5u")&&d(t,"class",m)},d(y){y&&T(t),r=!1,C()}}}function ss(e){let t,n=Tn(e[0]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Nn(In(e,n,i));return{c(){t=f("div");for(let i=0;i<s.length;i+=1)s[i].c();d(t,"id","notifications-container"),d(t,"class","svelte-1mipv5u")},m(i,c){O(i,t,c);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,[c]){if(c&1){n=Tn(i[0]);let l;for(l=0;l<n.length;l+=1){const u=In(i,n,l);s[l]?s[l].p(u,c):(s[l]=Nn(u),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},i:E,o:E,d(i){i&&T(t),qn(s,i)}}}function os(e,t,n){let s;return vt(e,pe,c=>n(0,s=c)),[s,c=>pe.closeNotification(c.id)]}class is extends wt{constructor(t){super(),bt(this,t,os,ss,Re,{})}}const cs="https://yup.perfdive.com/api",$t=async(e,t)=>{const n=await fetch(`${cs}${e}`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n},ls=async e=>{try{return await $t("/log",{method:"POST",headers:{"Content-Type":"application/json",device:localStorage.getItem("deviceAlias"),event:"trackCapabilities"},body:JSON.stringify(e)})}catch(t){console.error(t),pe.addNotification({text:"sendTrackCapabilities failed, "+t.message,type:"error"})}},rs=async e=>{try{return await $t("/log",{method:"POST",headers:{"Content-Type":"application/json",device:localStorage.getItem("deviceAlias"),event:"trackSettings"},body:JSON.stringify(e)})}catch(t){console.error(t),pe.addNotification({text:"sendTrackSettings failed, "+t.message,type:"error"})}},as=async e=>{const t=new FormData;t.append("photo",e);try{const n=await $t("/upload",{method:"POST",body:t,headers:{device:localStorage.getItem("deviceAlias"),event:"trackSettings"}})}catch(n){console.error(n),pe.addNotification({text:"sendPhoto failed, "+n.message,type:"error"})}},us=e=>{const t=e.getCapabilities(),n=e.getSettings();return ls(t),rs(n),{capabilities:t,canAutoFocus:()=>t.focusDistance&&t.focusMode&&(t==null?void 0:t.focusMode.includes("manual"))||!1,getFocusDistance:()=>{const{focusDistance:a}=t;return a&&(a.max-a.min)/a.step,a},getSettings:()=>e.getSettings(),setFocusMode:a=>e.applyConstraints({advanced:[{focusMode:a}]}),setFocusDistance:a=>e.applyConstraints({advanced:[{focusMode:"manual",focusDistance:a}]}),setTorch:a=>{t.torch&&e.applyConstraints({advanced:[{torch:a}]})},settings:n,setFocusDistancePct:async a=>{const{focusDistance:y}=t;if(!y){alert("Focus distance not supported");return}const b=(y.max-y.min)/100,$=y.min+b*a;try{await e.applyConstraints({advanced:[{focusMode:"manual",focusDistance:$}]})}catch(p){alert(p.message),console.error(p)}return $},setZoom:a=>e.applyConstraints({advanced:[{zoom:a}]})}},fs=.1;let ne;const ds=({file:e,volume:t})=>{ne==null||ne.pause(),ne=new Audio(`public/sounds/${e}.ogg`),ne.volume=t||fs,ne.play()};function ps(){const e=["grabFrame","videoCapture"];let t="videoCapture",n=0,s=0,i=0,c=0,l=0,u,m=!1,r=null,C,a,y;function b(_,F,w,A){y=_,C=new ImageCapture(F),a=new BarcodeDetector({formats:["pdf417"]})}async function $(){if(t==="grabFrame")return C.grabFrame();if(t==="videoCapture")return y;if(t==="takePhoto"){const _=await C.takePhoto(),F=new Image;return F.src=URL.createObjectURL(_),await new Promise(w=>{F.onload=w}),F}}async function p(){const _=await $();return await a.detect(_)}async function M(){try{const _=await C.grabFrame(),F=document.createElement("canvas"),w=F.getContext("2d");F.width=_.width,F.height=_.height,w.drawImage(_,0,0),F.toBlob(A=>{as(A)})}catch(_){console.log(_)}}function I(_){const F=Date.now()-_;c+=1,l=c>1?(l*(c-1)+F)/c:F,N(w=>({...w,scanCount:c,average:l}))}async function L(){try{const _=Date.now(),F=await p();if(m)return;I(_),F.length>0?(n+=1,r=F[0].rawValue,N(w=>({...w,barcode:r,success:n})),ds({file:"Ceres",volume:1})):(s+=1,N(w=>({...w,fail:s})))}catch(_){i+=1,N(F=>({...F,error:i})),console.log(_)}finally{setTimeout(L,100)}}function B(){m=!0,clearInterval(u)}const{subscribe:V,update:N}=yt({mode:t,success:n,fail:s,barcode:r,scanCount:c,error:i,average:l,toggleMode:()=>{const F=(e.indexOf(t)+1)%e.length;t=e[F],N(w=>({...w,mode:t}))},resetStats:()=>{n=0,s=0},resetBarcode:()=>{r=null}});return{init:b,subscribe:V,toggleMode:()=>N(_=>({..._,mode:e[(e.indexOf(_.mode)+1)%e.length]})),resetStats:()=>N(_=>({..._,success:0,fail:0,error:0,scanCount:0,average:0})),resetBarcode:()=>N(_=>({..._,barcode:null})),stop:B,start:()=>{m=!1,L(),u=setInterval(M,5e3)}}}function gs(e){var Kt,Wt,Xt,Yt,Gt,Qt,xt,en,tn,nn,sn,on,cn,ln,rn;let t,n,s,i=e[1].scanCount+"",c,l,u,m,r=e[1].average.toFixed(2)+"",C,a,y,b,$=e[1].fail+"",p,M,I,L,B=e[1].success+"",V,N,_,F,w=((Kt=e[8])==null?void 0:Kt.exposureTime)+"",A,St,ge,Ft,me=((Wt=e[8])==null?void 0:Wt.contrast)+"",Ve,Ct,ve,Dt,he=((Xt=e[8])==null?void 0:Xt.exposureMode)+"",Ze,Mt,_e,Tt,be=((Yt=e[8])==null?void 0:Yt.height)+"",He,Ot,we,It,ye=((Gt=e[8])==null?void 0:Gt.width)+"",Je,Nt,$e,Pt,Se=((Qt=e[8])==null?void 0:Qt.resizeMode)+"",Ke,Et,Fe,kt,Ce=((xt=e[8])==null?void 0:xt.saturation)+"",We,At,De,Lt,Me=((en=e[8])==null?void 0:en.sharpness)+"",Xe,Ye,j,Ge,k,Y,ce,Z,Te,Bt,Qe,jt,G,P,Oe,zt,z,xe,Ie=((sn=(nn=(tn=e[0])==null?void 0:tn.capabilities)==null?void 0:nn.focusDistance)==null?void 0:sn.min.toFixed(2))+"",et,Ut,tt,Ne=(e[3]?e[3].toFixed(2):"-")+"",nt,qt,st,Pe=((ln=(cn=(on=e[0])==null?void 0:on.capabilities)==null?void 0:cn.focusDistance)==null?void 0:ln.max.toFixed(2))+"",ot,Rt,Q,le,H,Ee,Vt,it,ct,U,ke,J,K,Ae,Le,Zt,lt,x,Be=((rn=e[1])==null?void 0:rn.mode)+"",rt,Ht,re,W,je,at,Jt;return{c(){var g;t=f("div"),n=f("div"),s=h("Scan count: "),c=h(i),l=S(),u=f("div"),m=h("Average: "),C=h(r),a=S(),y=f("div"),b=h("Fail: "),p=h($),M=S(),I=f("div"),L=h("Success: "),V=h(B),N=S(),_=f("div"),F=h("exposureTime: "),A=h(w),St=S(),ge=f("div"),Ft=h("Contrast "),Ve=h(me),Ct=S(),ve=f("div"),Dt=h("exposureMode: "),Ze=h(he),Mt=S(),_e=f("div"),Tt=h("height: "),He=h(be),Ot=S(),we=f("div"),It=h("width: "),Je=h(ye),Nt=S(),$e=f("div"),Pt=h("resizeMode: "),Ke=h(Se),Et=S(),Fe=f("div"),kt=h("saturation: "),We=h(Ce),At=S(),De=f("div"),Lt=h("sharpness: "),Xe=h(Me),Ye=S(),j=f("video"),j.innerHTML="",Ge=S(),k=f("div"),Y=f("div"),ce=f("button"),Z=f("img"),Bt=S(),Qe=h(e[7]),jt=S(),G=f("div"),P=f("input"),zt=S(),z=f("div"),xe=f("span"),et=h(Ie),Ut=S(),tt=f("span"),nt=h(Ne),qt=S(),st=f("span"),ot=h(Pe),Rt=S(),Q=f("div"),le=f("button"),H=f("img"),Vt=S(),it=h(e[4]),ct=S(),U=f("div"),ke=f("div"),J=f("button"),K=f("img"),Zt=S(),lt=f("div"),x=f("div"),rt=h(Be),Ht=S(),re=f("button"),W=f("img"),d(t,"class","stats svelte-c2s76a"),j.autoplay=!0,d(j,"id","stream"),d(j,"class","svelte-c2s76a"),q(Z.src,Te=`public/${e[7]}-focus.svg`)||d(Z,"src",Te),d(Z,"class","svelte-c2s76a"),d(ce,"class","svelte-c2s76a"),d(Y,"class","focus__group svelte-c2s76a"),P.disabled=Oe=e[7]==="continuous",d(P,"id","zoom__range"),d(P,"type","range"),d(P,"min","0"),d(P,"max","100"),d(P,"class","svelte-c2s76a"),d(z,"class","focus__range svelte-c2s76a"),d(G,"class","focus__group grow svelte-c2s76a"),q(H.src,Ee=`public/${e[4]}-facingMode.svg`)||d(H,"src",Ee),d(H,"class","svelte-c2s76a"),d(le,"class","svelte-c2s76a"),d(Q,"class","focus__group svelte-c2s76a"),d(k,"id","focus"),d(k,"class","svelte-c2s76a"),q(K.src,Ae=`public/torch-${e[5]?"on":"off"}.svg`)||d(K,"src",Ae),d(K,"class","svelte-c2s76a"),J.disabled=Le=!e[0]||!e[0].capabilities.torch,d(J,"class","svelte-c2s76a"),d(ke,"class","focus__group svelte-c2s76a"),q(W.src,je=`public/mode-${(g=e[1])==null?void 0:g.mode}.svg`)||d(W,"src",je),d(W,"class","svelte-c2s76a"),d(re,"class","svelte-c2s76a"),d(x,"class","focus__group svelte-c2s76a"),d(U,"id","toggles"),d(U,"class","svelte-c2s76a")},m(g,v){var ae;O(g,t,v),o(t,n),o(n,s),o(n,c),o(t,l),o(t,u),o(u,m),o(u,C),o(t,a),o(t,y),o(y,b),o(y,p),o(t,M),o(t,I),o(I,L),o(I,V),o(t,N),o(t,_),o(_,F),o(_,A),o(t,St),o(t,ge),o(ge,Ft),o(ge,Ve),o(t,Ct),o(t,ve),o(ve,Dt),o(ve,Ze),o(t,Mt),o(t,_e),o(_e,Tt),o(_e,He),o(t,Ot),o(t,we),o(we,It),o(we,Je),o(t,Nt),o(t,$e),o($e,Pt),o($e,Ke),o(t,Et),o(t,Fe),o(Fe,kt),o(Fe,We),o(t,At),o(t,De),o(De,Lt),o(De,Xe),O(g,Ye,v),O(g,j,v),e[14](j),O(g,Ge,v),O(g,k,v),o(k,Y),o(Y,ce),o(ce,Z),o(Y,Bt),o(Y,Qe),o(k,jt),o(k,G),o(G,P),Dn(P,e[2]),o(G,zt),o(G,z),o(z,xe),o(xe,et),o(z,Ut),o(z,tt),o(tt,nt),o(z,qt),o(z,st),o(st,ot),o(k,Rt),o(k,Q),o(Q,le),o(le,H),o(Q,Vt),o(Q,it),O(g,ct,v),O(g,U,v),o(U,ke),o(ke,J),o(J,K),o(U,Zt),o(U,lt),o(lt,x),o(x,rt),o(x,Ht),o(x,re),o(re,W),at||(Jt=[R(ce,"click",e[12]),R(P,"change",e[15]),R(P,"input",e[15]),R(P,"change",e[9]),R(le,"click",e[13]),R(J,"click",e[10]),R(re,"click",(ae=e[11])==null?void 0:ae.toggleMode)],at=!0)},p(g,[v]){var ae,an,un,fn,dn,pn,gn,mn,vn,hn,_n,bn,wn,yn,$n,Sn;v&2&&i!==(i=g[1].scanCount+"")&&D(c,i),v&2&&r!==(r=g[1].average.toFixed(2)+"")&&D(C,r),v&2&&$!==($=g[1].fail+"")&&D(p,$),v&2&&B!==(B=g[1].success+"")&&D(V,B),v&256&&w!==(w=((ae=g[8])==null?void 0:ae.exposureTime)+"")&&D(A,w),v&256&&me!==(me=((an=g[8])==null?void 0:an.contrast)+"")&&D(Ve,me),v&256&&he!==(he=((un=g[8])==null?void 0:un.exposureMode)+"")&&D(Ze,he),v&256&&be!==(be=((fn=g[8])==null?void 0:fn.height)+"")&&D(He,be),v&256&&ye!==(ye=((dn=g[8])==null?void 0:dn.width)+"")&&D(Je,ye),v&256&&Se!==(Se=((pn=g[8])==null?void 0:pn.resizeMode)+"")&&D(Ke,Se),v&256&&Ce!==(Ce=((gn=g[8])==null?void 0:gn.saturation)+"")&&D(We,Ce),v&256&&Me!==(Me=((mn=g[8])==null?void 0:mn.sharpness)+"")&&D(Xe,Me),v&128&&!q(Z.src,Te=`public/${g[7]}-focus.svg`)&&d(Z,"src",Te),v&128&&D(Qe,g[7]),v&128&&Oe!==(Oe=g[7]==="continuous")&&(P.disabled=Oe),v&4&&Dn(P,g[2]),v&1&&Ie!==(Ie=((_n=(hn=(vn=g[0])==null?void 0:vn.capabilities)==null?void 0:hn.focusDistance)==null?void 0:_n.min.toFixed(2))+"")&&D(et,Ie),v&8&&Ne!==(Ne=(g[3]?g[3].toFixed(2):"-")+"")&&D(nt,Ne),v&1&&Pe!==(Pe=((yn=(wn=(bn=g[0])==null?void 0:bn.capabilities)==null?void 0:wn.focusDistance)==null?void 0:yn.max.toFixed(2))+"")&&D(ot,Pe),v&16&&!q(H.src,Ee=`public/${g[4]}-facingMode.svg`)&&d(H,"src",Ee),v&16&&D(it,g[4]),v&32&&!q(K.src,Ae=`public/torch-${g[5]?"on":"off"}.svg`)&&d(K,"src",Ae),v&1&&Le!==(Le=!g[0]||!g[0].capabilities.torch)&&(J.disabled=Le),v&2&&Be!==(Be=(($n=g[1])==null?void 0:$n.mode)+"")&&D(rt,Be),v&2&&!q(W.src,je=`public/mode-${(Sn=g[1])==null?void 0:Sn.mode}.svg`)&&d(W,"src",je)},i:E,o:E,d(g){g&&(T(t),T(Ye),T(j),T(Ge),T(k),T(ct),T(U)),e[14](null),at=!1,ie(Jt)}}}function ms(e,t,n){let s,i=0,c,l="environment",u=!1;async function m(w){console.log(w.target.value),n(2,i=w.target.value);const A=await($==null?void 0:$.setFocusDistancePct(i));n(3,c=A||void 0)}async function r(){n(5,u=!u),await($==null?void 0:$.setTorch(u))}const C=()=>navigator.mediaDevices.getUserMedia({video:{facingMode:l,aspectRatio:{exact:1.7777777778}},audio:!1});let a,y,b,$,p=ps();vt(e,p,w=>n(1,s=w));const M=["continuous","manual"];let I="continuous";const L=async()=>{try{b==null||b.stop(),p==null||p.stop(),y=await C(),n(6,a.srcObject=y,a),b=y.getVideoTracks()[0],n(0,$=us(b)),p.init(a,b,a.width,a.height),p.start()}catch(w){console.log("error",w),alert("Could not access the camera")}},B=async()=>{const w=M[M.indexOf(I)+1]||M[0];try{await $.setFocusMode(I),n(7,I=w)}catch{alert("Could not set focus mode")}},V=async()=>{n(4,l=l==="environment"?"user":"environment"),await L()};Jn(()=>((async()=>await L())(),()=>p==null?void 0:p.stop()));let N;function _(w){pt[w?"unshift":"push"](()=>{a=w,n(6,a)})}function F(){i=Vn(this.value),n(2,i)}return e.$$.update=()=>{e.$$.dirty&3&&(s==null||s.scanCount,n(8,N=$==null?void 0:$.getSettings()))},[$,s,i,c,l,u,a,I,N,m,r,p,B,V,_,F]}class vs extends wt{constructor(t){super(),bt(this,t,ms,gs,Re,{})}}const dt="deviceAlias",hs=()=>{const{subscribe:e,set:t}=yt(localStorage.getItem(dt));return{subscribe:e,ask:()=>{if(localStorage.getItem(dt))return;let n=prompt("Please input your device alias","device");n?(localStorage.setItem(dt,n),t(n)):alert("You must provide a device alias")}}},Pn=hs();function _s(e){let t;return{c(){t=f("h1"),t.textContent="BarcodeDetector not supported."},m(n,s){O(n,t,s)},d(n){n&&T(t)}}}function bs(e){let t;return{c(){t=f("h1"),t.textContent="Waiting for device alias..."},m(n,s){O(n,t,s)},i:E,o:E,d(n){n&&T(t)}}}function ws(e){let t,n;return t=new vs({}),{c(){Ln(t.$$.fragment)},m(s,i){ht(t,s,i),n=!0},i(s){n||(fe(t.$$.fragment,s),n=!0)},o(s){qe(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function ys(e){let t,n,s,i,c,l,u,m,r,C;s=new is({});let a=!e[1]&&_s();const y=[ws,bs],b=[];function $(p,M){return p[0]?0:1}return u=$(e),m=b[u]=y[u](e),{c(){t=f("meta"),n=S(),Ln(s.$$.fragment),i=S(),c=f("main"),a&&a.c(),l=S(),m.c(),r=Rn(),d(t,"name","viewport"),d(t,"content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")},m(p,M){o(document.head,t),O(p,n,M),ht(s,p,M),O(p,i,M),O(p,c,M),a&&a.m(c,null),O(p,l,M),b[u].m(p,M),O(p,r,M),C=!0},p(p,[M]){let I=u;u=$(p),u!==I&&(Gn(),qe(b[I],1,1,()=>{b[I]=null}),Qn(),m=b[u],m||(m=b[u]=y[u](p),m.c()),fe(m,1),m.m(r.parentNode,r))},i(p){C||(fe(s.$$.fragment,p),fe(m),C=!0)},o(p){qe(s.$$.fragment,p),qe(m),C=!1},d(p){p&&(T(n),T(i),T(c),T(l),T(r)),T(t),_t(s,p),a&&a.d(),b[u].d(p)}}}function $s(e,t,n){let s;vt(e,Pn,c=>n(0,s=c));const i=typeof BarcodeDetector<"u";return console.log("0.0.1"),Pn.ask(),[s,i]}class Ss extends wt{constructor(t){super(),bt(this,t,$s,ys,Re,{})}}new Ss({target:document.getElementById("app")});
