var wn=Object.defineProperty;var yn=(e,t,n)=>t in e?wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var et=(e,t,n)=>(yn(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function k(){}function hn(e){return e()}function rn(){return Object.create(null)}function ne(e){e.forEach(hn)}function vn(e){return typeof e=="function"}function Ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Pe;function G(e,t){return e===t?!0:(Pe||(Pe=document.createElement("a")),Pe.href=t,e===Pe.href)}function $n(e){return Object.keys(e).length===0}function Sn(e,...t){if(e==null){for(const o of t)o(void 0);return k}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ct(e,t,n){e.$$.on_destroy.push(Sn(t,n))}function ln(e){return e??""}function s(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function Fn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function _(e){return document.createTextNode(e)}function F(){return _(" ")}function Cn(){return _("")}function Z(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Dn(e){return e===""?null:+e}function Mn(e){return Array.from(e.childNodes)}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function an(e,t){e.value=t??""}let re;function ie(e){re=e}function On(){if(!re)throw new Error("Function called outside component initialization");return re}function Tn(e){On().$$.on_mount.push(e)}const ee=[],ot=[];let te=[];const un=[],Nn=Promise.resolve();let st=!1;function Pn(){st||(st=!0,Nn.then(_n))}function it(e){te.push(e)}const tt=new Set;let Q=0;function _n(){if(Q!==0)return;const e=re;do{try{for(;Q<ee.length;){const t=ee[Q];Q++,ie(t),In(t.$$)}}catch(t){throw ee.length=0,Q=0,t}for(ie(null),ee.length=0,Q=0;ot.length;)ot.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];tt.has(n)||(tt.add(n),n())}te.length=0}while(ee.length);for(;un.length;)un.pop()();st=!1,tt.clear(),ie(e)}function In(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(it)}}function kn(e){const t=[],n=[];te.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),te=t}const Ie=new Set;let H;function En(){H={r:0,c:[],p:H}}function An(){H.r||ne(H.c),H=H.p}function ce(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function ke(e,t,n,o){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),H.c.push(()=>{Ie.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function bn(e){e&&e.c()}function rt(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),it(()=>{const c=e.$$.on_mount.map(hn).filter(vn);e.$$.on_destroy?e.$$.on_destroy.push(...c):ne(c),e.$$.on_mount=[]}),i.forEach(it)}function lt(e,t){const n=e.$$;n.fragment!==null&&(kn(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ln(e,t){e.$$.dirty[0]===-1&&(ee.push(e),Pn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function at(e,t,n,o,i,c,r=null,u=[-1]){const m=re;ie(e);const l=e.$$={fragment:null,ctx:[],props:c,update:k,not_equal:i,bound:rn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:rn(),dirty:u,skip_bound:!1,root:t.target||m.$$.root};r&&r(l.root);let C=!1;if(l.ctx=n?n(e,t.props||{},(a,y,...b)=>{const $=b.length?b[0]:y;return l.ctx&&i(l.ctx[a],l.ctx[a]=$)&&(!l.skip_bound&&l.bound[a]&&l.bound[a]($),C&&Ln(e,a)),y}):[],l.update(),C=!0,ne(l.before_update),l.fragment=o?o(l.ctx):!1,t.target){if(t.hydrate){const a=Mn(t.target);l.fragment&&l.fragment.l(a),a.forEach(O)}else l.fragment&&l.fragment.c();t.intro&&ce(e.$$.fragment),rt(e,t.target,t.anchor),_n()}ie(m)}class ut{constructor(){et(this,"$$");et(this,"$$set")}$destroy(){lt(this,1),this.$destroy=k}$on(t,n){if(!vn(n))return k;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!$n(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Bn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Bn);const x=[];function ft(e,t=k){let n;const o=new Set;function i(u){if(Ee(e,u)&&(e=u,n)){const m=!x.length;for(const l of o)l[1](),x.push(l,e);if(m){for(let l=0;l<x.length;l+=2)x[l][0](x[l+1]);x.length=0}}}function c(u){i(u(e))}function r(u,m=k){const l=[u,m];return o.add(l),o.size===1&&(n=t(i,c)||k),u(e),()=>{o.delete(l),o.size===0&&n&&(n(),n=null)}}return{set:i,update:c,subscribe:r}}let dn=0;const jn=3e3;function zn(){const{subscribe:e,update:t}=ft([]);function n(i){dn+=1;const c=dn,r={...i,id:c};t(u=>[...u,r].slice(-5)),setTimeout(()=>{o(c)},jn)}function o(i){t(c=>c.filter(r=>r.id!==i))}return{subscribe:e,addNotification:n,closeNotification:o}}const le=zn();function pn(e,t,n){const o=e.slice();return o[2]=t[n],o}function gn(e){let t,n,o=e[2].text+"",i,c,r,u,m,l,C;function a(){return e[1](e[2])}return{c(){t=d("div"),n=d("div"),i=_(o),c=F(),r=d("button"),r.textContent="X",u=F(),p(r,"class","svelte-1mipv5u"),p(t,"class",m=ln(`notification ${e[2].type}`)+" svelte-1mipv5u")},m(y,b){T(y,t,b),s(t,n),s(n,i),s(t,c),s(t,r),s(t,u),l||(C=Z(r,"click",a),l=!0)},p(y,b){e=y,b&1&&o!==(o=e[2].text+"")&&M(i,o),b&1&&m!==(m=ln(`notification ${e[2].type}`)+" svelte-1mipv5u")&&p(t,"class",m)},d(y){y&&O(t),l=!1,C()}}}function qn(e){let t,n=fn(e[0]),o=[];for(let i=0;i<n.length;i+=1)o[i]=gn(pn(e,n,i));return{c(){t=d("div");for(let i=0;i<o.length;i+=1)o[i].c();p(t,"id","notifications-container"),p(t,"class","svelte-1mipv5u")},m(i,c){T(i,t,c);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(t,null)},p(i,[c]){if(c&1){n=fn(i[0]);let r;for(r=0;r<n.length;r+=1){const u=pn(i,n,r);o[r]?o[r].p(u,c):(o[r]=gn(u),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},i:k,o:k,d(i){i&&O(t),Fn(o,i)}}}function Un(e,t,n){let o;return ct(e,le,c=>n(0,o=c)),[o,c=>le.closeNotification(c.id)]}class Jn extends ut{constructor(t){super(),at(this,t,Un,qn,Ee,{})}}const Rn="https://yup.perfdive.com/api",dt=async(e,t)=>{const n=await fetch(`${Rn}${e}`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n},Vn=async e=>{try{return await dt("/log",{method:"POST",headers:{"Content-Type":"application/json",device:localStorage.getItem("deviceAlias"),event:"trackCapabilities"},body:JSON.stringify(e)})}catch(t){console.error(t),le.addNotification({text:"sendTrackCapabilities failed, "+t.message,type:"error"})}},Zn=async e=>{try{return await dt("/log",{method:"POST",headers:{"Content-Type":"application/json",device:localStorage.getItem("deviceAlias"),event:"trackSettings"},body:JSON.stringify(e)})}catch(t){console.error(t),le.addNotification({text:"sendTrackSettings failed, "+t.message,type:"error"})}},Hn=async e=>{const t=new FormData;t.append("photo",e);try{const n=await dt("/upload",{method:"POST",body:t,headers:{device:localStorage.getItem("deviceAlias"),event:"trackSettings"}})}catch(n){console.error(n),le.addNotification({text:"sendPhoto failed, "+n.message,type:"error"})}},Kn=e=>{const t=e.getCapabilities(),n=e.getSettings();return Vn(t),Zn(n),{capabilities:t,canAutoFocus:()=>t.focusDistance&&t.focusMode&&(t==null?void 0:t.focusMode.includes("manual"))||!1,getFocusDistance:()=>{const{focusDistance:a}=t;return a&&(a.max-a.min)/a.step,a},getSettings:()=>e.getSettings(),setFocusMode:a=>e.applyConstraints({advanced:[{focusMode:a}]}),setFocusDistance:a=>e.applyConstraints({advanced:[{focusMode:"manual",focusDistance:a}]}),setTorch:a=>{t.torch&&e.applyConstraints({advanced:[{torch:a}]})},settings:n,setFocusDistancePct:async a=>{const{focusDistance:y}=t;if(!y){alert("Focus distance not supported");return}const b=(y.max-y.min)/100,$=y.min+b*a;try{await e.applyConstraints({advanced:[{focusMode:"manual",focusDistance:$}]})}catch(f){alert(f.message),console.error(f)}return $},setZoom:a=>e.applyConstraints({advanced:[{zoom:a}]})}};function Wn(){const e=["grabFrame","videoCapture","takePhoto"];let t="grabFrame",n=0,o=0,i=0,c=0,r=0,u,m=!1,l=null,C,a,y;function b(h,S,w,A){y=h,C=new ImageCapture(S),a=new BarcodeDetector({formats:["pdf417"]})}async function $(){if(t==="grabFrame")return C.grabFrame();if(t==="videoCapture")return y;if(t==="takePhoto"){const h=await C.takePhoto(),S=new Image;return S.src=URL.createObjectURL(h),await new Promise(w=>{S.onload=w}),S}}async function f(){const h=await $();return await a.detect(h)}async function D(){try{const h=await C.grabFrame(),S=document.createElement("canvas"),w=S.getContext("2d");S.width=h.width,S.height=h.height,w.drawImage(h,0,0),S.toBlob(A=>{Hn(A)})}catch(h){console.log(h)}}function N(h){const S=Date.now()-h;c+=1,r=c>1?(r*(c-1)+S)/c:S,P(w=>({...w,scanCount:c,average:r}))}async function L(){try{const h=Date.now(),S=await f();if(m)return;N(h),S.length>0?(n+=1,l=S[0].rawValue,P(w=>({...w,barcode:l,success:n}))):(o+=1,P(w=>({...w,fail:o})))}catch(h){i+=1,P(S=>({...S,error:i})),console.log(h)}finally{setTimeout(L,100)}}function B(){m=!0,clearInterval(u)}const{subscribe:q,update:P}=ft({mode:t,success:n,fail:o,barcode:l,scanCount:c,error:i,average:r,toggleMode:()=>{const S=(e.indexOf(t)+1)%e.length;t=e[S],P(w=>({...w,mode:t}))},resetStats:()=>{n=0,o=0},resetBarcode:()=>{l=null}});return{init:b,subscribe:q,toggleMode:()=>P(h=>({...h,mode:e[(e.indexOf(h.mode)+1)%e.length]})),resetStats:()=>P(h=>({...h,success:0,fail:0,error:0,scanCount:0,average:0})),resetBarcode:()=>P(h=>({...h,barcode:null})),stop:B,start:()=>{m=!1,L(),u=setInterval(D,5e3)}}}function Xn(e){var Et,At,Lt,Bt,jt,zt,qt,Ut,Jt,Rt,Vt,Zt,Ht;let t,n,o,i=e[1].scanCount+"",c,r,u,m,l=e[1].average.toFixed(2)+"",C,a,y,b,$=e[1].fail+"",f,D,N,L,B=e[1].success+"",q,P,h,S,w=((Et=e[8])==null?void 0:Et.contrast)+"",A,pt,ae,gt,ue=((At=e[8])==null?void 0:At.exposureMode)+"",Ae,mt,fe,ht,de=((Lt=e[8])==null?void 0:Lt.height)+"",Le,vt,pe,_t,ge=((Bt=e[8])==null?void 0:Bt.width)+"",Be,bt,me,wt,he=((jt=e[8])==null?void 0:jt.resizeMode)+"",je,yt,ve,$t,_e=((zt=e[8])==null?void 0:zt.saturation)+"",ze,St,be,Ft,we=((qt=e[8])==null?void 0:qt.sharpness)+"",qe,Ct,ye=JSON.stringify(e[8],null,2)+"",Ue,Je,j,Re,E,K,oe,U,$e,Dt,Ve,Mt,W,I,Se,Ot,z,Ze,Fe=((Rt=(Jt=(Ut=e[0])==null?void 0:Ut.capabilities)==null?void 0:Jt.focusDistance)==null?void 0:Rt.min.toFixed(2))+"",He,Tt,Ke,Ce=(e[3]?e[3].toFixed(2):"-")+"",We,Nt,Xe,De=((Ht=(Zt=(Vt=e[0])==null?void 0:Vt.capabilities)==null?void 0:Zt.focusDistance)==null?void 0:Ht.max.toFixed(2))+"",Ye,Pt,X,se,J,Me,It,Ge,Qe,Y,Oe,R,V,Te,Ne,xe,kt;return{c(){t=d("div"),n=d("div"),o=_("Scan count: "),c=_(i),r=F(),u=d("div"),m=_("Average: "),C=_(l),a=F(),y=d("div"),b=_("Fail: "),f=_($),D=F(),N=d("div"),L=_("Success: "),q=_(B),P=F(),h=d("div"),S=_("Contrast "),A=_(w),pt=F(),ae=d("div"),gt=_("exposureMode: "),Ae=_(ue),mt=F(),fe=d("div"),ht=_("height: "),Le=_(de),vt=F(),pe=d("div"),_t=_("width: "),Be=_(ge),bt=F(),me=d("div"),wt=_("resizeMode: "),je=_(he),yt=F(),ve=d("div"),$t=_("saturation: "),ze=_(_e),St=F(),be=d("div"),Ft=_("sharpness: "),qe=_(we),Ct=F(),Ue=_(ye),Je=F(),j=d("video"),j.innerHTML="",Re=F(),E=d("div"),K=d("div"),oe=d("button"),U=d("img"),Dt=F(),Ve=_(e[7]),Mt=F(),W=d("div"),I=d("input"),Ot=F(),z=d("div"),Ze=d("span"),He=_(Fe),Tt=F(),Ke=d("span"),We=_(Ce),Nt=F(),Xe=d("span"),Ye=_(De),Pt=F(),X=d("div"),se=d("button"),J=d("img"),It=F(),Ge=_(e[4]),Qe=F(),Y=d("div"),Oe=d("div"),R=d("button"),V=d("img"),p(t,"class","stats svelte-d9pg8m"),j.autoplay=!0,p(j,"id","stream"),p(j,"class","svelte-d9pg8m"),G(U.src,$e=`public/${e[7]}-focus.svg`)||p(U,"src",$e),p(U,"class","svelte-d9pg8m"),p(oe,"class","svelte-d9pg8m"),p(K,"class","focus__group svelte-d9pg8m"),I.disabled=Se=e[7]==="continuous",p(I,"id","zoom__range"),p(I,"type","range"),p(I,"min","0"),p(I,"max","100"),p(I,"class","svelte-d9pg8m"),p(z,"class","focus__range svelte-d9pg8m"),p(W,"class","focus__group grow svelte-d9pg8m"),G(J.src,Me=`public/${e[4]}-facingMode.svg`)||p(J,"src",Me),p(J,"class","svelte-d9pg8m"),p(se,"class","svelte-d9pg8m"),p(X,"class","focus__group svelte-d9pg8m"),p(E,"id","focus"),p(E,"class","svelte-d9pg8m"),G(V.src,Te=`public/torch-${e[5]?"on":"off"}.svg`)||p(V,"src",Te),p(V,"class","svelte-d9pg8m"),R.disabled=Ne=!e[0]||!e[0].capabilities.torch,p(R,"class","svelte-d9pg8m"),p(Oe,"class","focus__group svelte-d9pg8m"),p(Y,"id","toggles"),p(Y,"class","svelte-d9pg8m")},m(g,v){T(g,t,v),s(t,n),s(n,o),s(n,c),s(t,r),s(t,u),s(u,m),s(u,C),s(t,a),s(t,y),s(y,b),s(y,f),s(t,D),s(t,N),s(N,L),s(N,q),s(t,P),s(t,h),s(h,S),s(h,A),s(t,pt),s(t,ae),s(ae,gt),s(ae,Ae),s(t,mt),s(t,fe),s(fe,ht),s(fe,Le),s(t,vt),s(t,pe),s(pe,_t),s(pe,Be),s(t,bt),s(t,me),s(me,wt),s(me,je),s(t,yt),s(t,ve),s(ve,$t),s(ve,ze),s(t,St),s(t,be),s(be,Ft),s(be,qe),s(t,Ct),s(t,Ue),T(g,Je,v),T(g,j,v),e[14](j),T(g,Re,v),T(g,E,v),s(E,K),s(K,oe),s(oe,U),s(K,Dt),s(K,Ve),s(E,Mt),s(E,W),s(W,I),an(I,e[2]),s(W,Ot),s(W,z),s(z,Ze),s(Ze,He),s(z,Tt),s(z,Ke),s(Ke,We),s(z,Nt),s(z,Xe),s(Xe,Ye),s(E,Pt),s(E,X),s(X,se),s(se,J),s(X,It),s(X,Ge),T(g,Qe,v),T(g,Y,v),s(Y,Oe),s(Oe,R),s(R,V),xe||(kt=[Z(oe,"click",e[12]),Z(I,"change",e[15]),Z(I,"input",e[15]),Z(I,"change",e[9]),Z(se,"click",e[13]),Z(R,"click",e[10])],xe=!0)},p(g,[v]){var Kt,Wt,Xt,Yt,Gt,Qt,xt,en,tn,nn,on,sn,cn;v&2&&i!==(i=g[1].scanCount+"")&&M(c,i),v&2&&l!==(l=g[1].average.toFixed(2)+"")&&M(C,l),v&2&&$!==($=g[1].fail+"")&&M(f,$),v&2&&B!==(B=g[1].success+"")&&M(q,B),v&256&&w!==(w=((Kt=g[8])==null?void 0:Kt.contrast)+"")&&M(A,w),v&256&&ue!==(ue=((Wt=g[8])==null?void 0:Wt.exposureMode)+"")&&M(Ae,ue),v&256&&de!==(de=((Xt=g[8])==null?void 0:Xt.height)+"")&&M(Le,de),v&256&&ge!==(ge=((Yt=g[8])==null?void 0:Yt.width)+"")&&M(Be,ge),v&256&&he!==(he=((Gt=g[8])==null?void 0:Gt.resizeMode)+"")&&M(je,he),v&256&&_e!==(_e=((Qt=g[8])==null?void 0:Qt.saturation)+"")&&M(ze,_e),v&256&&we!==(we=((xt=g[8])==null?void 0:xt.sharpness)+"")&&M(qe,we),v&256&&ye!==(ye=JSON.stringify(g[8],null,2)+"")&&M(Ue,ye),v&128&&!G(U.src,$e=`public/${g[7]}-focus.svg`)&&p(U,"src",$e),v&128&&M(Ve,g[7]),v&128&&Se!==(Se=g[7]==="continuous")&&(I.disabled=Se),v&4&&an(I,g[2]),v&1&&Fe!==(Fe=((nn=(tn=(en=g[0])==null?void 0:en.capabilities)==null?void 0:tn.focusDistance)==null?void 0:nn.min.toFixed(2))+"")&&M(He,Fe),v&8&&Ce!==(Ce=(g[3]?g[3].toFixed(2):"-")+"")&&M(We,Ce),v&1&&De!==(De=((cn=(sn=(on=g[0])==null?void 0:on.capabilities)==null?void 0:sn.focusDistance)==null?void 0:cn.max.toFixed(2))+"")&&M(Ye,De),v&16&&!G(J.src,Me=`public/${g[4]}-facingMode.svg`)&&p(J,"src",Me),v&16&&M(Ge,g[4]),v&32&&!G(V.src,Te=`public/torch-${g[5]?"on":"off"}.svg`)&&p(V,"src",Te),v&1&&Ne!==(Ne=!g[0]||!g[0].capabilities.torch)&&(R.disabled=Ne)},i:k,o:k,d(g){g&&(O(t),O(Je),O(j),O(Re),O(E),O(Qe),O(Y)),e[14](null),xe=!1,ne(kt)}}}function Yn(e,t,n){let o,i=0,c,r="environment",u=!1;async function m(w){console.log(w.target.value),n(2,i=w.target.value);const A=await($==null?void 0:$.setFocusDistancePct(i));n(3,c=A||void 0)}async function l(){n(5,u=!u),await($==null?void 0:$.setTorch(u))}const C=()=>navigator.mediaDevices.getUserMedia({video:{facingMode:r,width:{ideal:1080}},audio:!1});let a,y,b,$,f=Wn();ct(e,f,w=>n(1,o=w));const D=["continuous","manual"];let N="continuous";const L=async()=>{try{b==null||b.stop(),f==null||f.stop(),y=await C(),n(6,a.srcObject=y,a),b=y.getVideoTracks()[0],n(0,$=Kn(b)),f.init(a,b,a.width,a.height),f.start()}catch(w){console.log("error",w),alert("Could not access the camera")}},B=async()=>{const w=D[D.indexOf(N)+1]||D[0];try{await $.setFocusMode(N),n(7,N=w)}catch{alert("Could not set focus mode")}},q=async()=>{n(4,r=r==="environment"?"user":"environment"),await L()};Tn(()=>((async()=>await L())(),()=>f==null?void 0:f.stop()));let P;function h(w){ot[w?"unshift":"push"](()=>{a=w,n(6,a)})}function S(){i=Dn(this.value),n(2,i)}return e.$$.update=()=>{e.$$.dirty&3&&(o.scanCount,n(8,P=$==null?void 0:$.getSettings()))},[$,o,i,c,r,u,a,N,P,m,l,f,B,q,h,S]}class Gn extends ut{constructor(t){super(),at(this,t,Yn,Xn,Ee,{})}}const nt="deviceAlias",Qn=()=>{const{subscribe:e,set:t}=ft(localStorage.getItem(nt));return{subscribe:e,ask:()=>{if(localStorage.getItem(nt))return;let n=prompt("Please input your device alias","device");n?(localStorage.setItem(nt,n),t(n)):alert("You must provide a device alias")}}},mn=Qn();function xn(e){let t;return{c(){t=d("h1"),t.textContent="BarcodeDetector not supported."},m(n,o){T(n,t,o)},d(n){n&&O(t)}}}function eo(e){let t;return{c(){t=d("h1"),t.textContent="Waiting for device alias..."},m(n,o){T(n,t,o)},i:k,o:k,d(n){n&&O(t)}}}function to(e){let t,n;return t=new Gn({}),{c(){bn(t.$$.fragment)},m(o,i){rt(t,o,i),n=!0},i(o){n||(ce(t.$$.fragment,o),n=!0)},o(o){ke(t.$$.fragment,o),n=!1},d(o){lt(t,o)}}}function no(e){let t,n,o,i,c,r,u,m,l,C;o=new Jn({});let a=!e[1]&&xn();const y=[to,eo],b=[];function $(f,D){return f[0]?0:1}return u=$(e),m=b[u]=y[u](e),{c(){t=d("meta"),n=F(),bn(o.$$.fragment),i=F(),c=d("main"),a&&a.c(),r=F(),m.c(),l=Cn(),p(t,"name","viewport"),p(t,"content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")},m(f,D){s(document.head,t),T(f,n,D),rt(o,f,D),T(f,i,D),T(f,c,D),a&&a.m(c,null),T(f,r,D),b[u].m(f,D),T(f,l,D),C=!0},p(f,[D]){let N=u;u=$(f),u!==N&&(En(),ke(b[N],1,1,()=>{b[N]=null}),An(),m=b[u],m||(m=b[u]=y[u](f),m.c()),ce(m,1),m.m(l.parentNode,l))},i(f){C||(ce(o.$$.fragment,f),ce(m),C=!0)},o(f){ke(o.$$.fragment,f),ke(m),C=!1},d(f){f&&(O(n),O(i),O(c),O(r),O(l)),O(t),lt(o,f),a&&a.d(),b[u].d(f)}}}function oo(e,t,n){let o;ct(e,mn,c=>n(0,o=c));const i=typeof BarcodeDetector<"u";return mn.ask(),[o,i]}class so extends ut{constructor(t){super(),at(this,t,oo,no,Ee,{})}}new so({target:document.getElementById("app")});
